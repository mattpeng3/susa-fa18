<html>
<body>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="visualization.js"></script>
    <script>
        window.addEventListener('resize', function (event) {
            $("#chart").width(window.innerWidth * 0.9);
            $("#chart").height(window.innerHeight);
        });     
    </script>
<select onchange="remakeChart()" id="label" style="margin-left:7px"></select>
<div id="chart" style="width: 1600;height: 1200">
</div>
<script>
    var realdata = {"toxic":{"advice\/question":0.0305571519,"animals":0.0425189077,"anime\/manga":0.0433381919,"appearance":0.0321370698,"arts":0.0188461165,"autos":0.0236057128,"board_game":0.0171705025,"books":0.0327417119,"card_game":0.0215260645,"company\/website":0.0330981164,"crypto":0.0216759738,"drugs":0.0694279823,"education":0.0157944911,"electronics":0.0172793256,"finance\/money":0.0140026984,"food\/drink":0.0287069106,"geo":0.0278845567,"hardware\/tools":0.0219857177,"health":0.0606775371,"hobby":0.024199404,"meta":0.0998363479,"movies":0.0331046758,"music":0.0495443034,"other":0.0294908441,"parenting":0.0464743116,"politics\/viewpoint":0.0717276532,"profession":0.0252551335,"programming":0.0070936328,"religion\/supernatural":0.0316086978,"rpg":0.0167256045,"sex\/relationships":0.1125346917,"social_group":0.0708567473,"software":0.0151197391,"sports":0.0308712749,"stem":0.0106304902,"travel":0.0133951035,"tv_show":0.0552820047,"video_game":0.0475992868,"writing\/stories":0.1082860413},"severe_toxic":{"advice\/question":0.0001857638,"animals":0.000116791,"anime\/manga":0.0003015392,"appearance":0.0000748852,"arts":0.0000449165,"autos":0.0000710675,"board_game":0.0000391442,"books":0.0001208011,"card_game":0.0000785091,"company\/website":0.0001320018,"crypto":0.0001158219,"drugs":0.0005115712,"education":0.0000627688,"electronics":0.000041103,"finance\/money":0.0000178127,"food\/drink":0.0000709728,"geo":0.0001389355,"hardware\/tools":0.0000393353,"health":0.0004142293,"hobby":0.0000741313,"meta":0.0021953802,"movies":0.00017206,"music":0.0005246832,"other":0.0002026712,"parenting":0.0001308178,"politics\/viewpoint":0.000529355,"profession":0.0000964991,"programming":0.0000065885,"religion\/supernatural":0.000084406,"rpg":0.0000608399,"sex\/relationships":0.0010683419,"social_group":0.0004481967,"software":0.0000562747,"sports":0.0001269911,"stem":0.000018498,"travel":0.0000131267,"tv_show":0.0004056186,"video_game":0.0005440045,"writing\/stories":0.002270122},"obscene":{"advice\/question":0.0114381439,"animals":0.010966318,"anime\/manga":0.0224878672,"appearance":0.011202853,"arts":0.0059959589,"autos":0.0081200499,"board_game":0.0051047241,"books":0.0154133376,"card_game":0.0076111845,"company\/website":0.0171828119,"crypto":0.0100758178,"drugs":0.0429542002,"education":0.006966792,"electronics":0.0067196716,"finance\/money":0.0053864951,"food\/drink":0.009633347,"geo":0.0132210884,"hardware\/tools":0.0071029489,"health":0.030016952,"hobby":0.00842457,"meta":0.0636470576,"movies":0.0171975683,"music":0.0294632153,"other":0.0148618821,"parenting":0.0185024444,"politics\/viewpoint":0.0393515979,"profession":0.0120683489,"programming":0.0021950816,"religion\/supernatural":0.0120065103,"rpg":0.0051692369,"sex\/relationships":0.0693850425,"social_group":0.0377960269,"software":0.0063581645,"sports":0.0143247965,"stem":0.0033935095,"travel":0.002886027,"tv_show":0.0294858836,"video_game":0.0241297689,"writing\/stories":0.0627398344},"threat":{"advice\/question":0.0006959765,"animals":0.0004336823,"anime\/manga":0.0009626301,"appearance":0.0001076593,"arts":0.0001119796,"autos":0.0000882562,"board_game":0.0002616276,"books":0.000469444,"card_game":0.0001963069,"company\/website":0.0001500199,"crypto":0.000117694,"drugs":0.0006854314,"education":0.0001363583,"electronics":0.0000721078,"finance\/money":0.0000365544,"food\/drink":0.0001304183,"geo":0.0002222778,"hardware\/tools":0.0001597807,"health":0.0007340626,"hobby":0.0001909217,"meta":0.0017121657,"movies":0.0004675515,"music":0.0005911589,"other":0.0002441914,"parenting":0.0002917256,"politics\/viewpoint":0.000951013,"profession":0.0001304345,"programming":0.0000229491,"religion\/supernatural":0.0002758485,"rpg":0.0002752517,"sex\/relationships":0.0012487889,"social_group":0.000587744,"software":0.0000762549,"sports":0.0001967296,"stem":0.0000481851,"travel":0.000057745,"tv_show":0.0009212576,"video_game":0.0012503621,"writing\/stories":0.0027331448},"insult":{"advice\/question":0.005047242,"animals":0.0058690155,"anime\/manga":0.0076970841,"appearance":0.0038455197,"arts":0.0023047909,"autos":0.0028489443,"board_game":0.0018343878,"books":0.0048688983,"card_game":0.0029695995,"company\/website":0.0055974856,"crypto":0.0035974817,"drugs":0.0139050709,"education":0.0022991796,"electronics":0.0021775426,"finance\/money":0.0015455115,"food\/drink":0.0035993532,"geo":0.0046479595,"hardware\/tools":0.0027526854,"health":0.0110292206,"hobby":0.0032573187,"meta":0.0323575697,"movies":0.005087992,"music":0.0099826505,"other":0.0054783701,"parenting":0.006397421,"politics\/viewpoint":0.0147650097,"profession":0.004016594,"programming":0.000697863,"religion\/supernatural":0.0040280063,"rpg":0.0018833755,"sex\/relationships":0.0257089669,"social_group":0.0134465461,"software":0.0022469711,"sports":0.0047777246,"stem":0.0011993645,"travel":0.0014669918,"tv_show":0.0110325255,"video_game":0.0097436479,"writing\/stories":0.0306217882},"identity_hate":{"advice\/question":0.0008370476,"animals":0.0010015259,"anime\/manga":0.0012221094,"appearance":0.0005392865,"arts":0.0003605659,"autos":0.0003312108,"board_game":0.0003788605,"books":0.0007555376,"card_game":0.0003839888,"company\/website":0.0005512517,"crypto":0.0003715653,"drugs":0.0017580077,"education":0.0003033149,"electronics":0.0002250736,"finance\/money":0.0001490069,"food\/drink":0.0005121129,"geo":0.0008906649,"hardware\/tools":0.0003499504,"health":0.0014961126,"hobby":0.0004496696,"meta":0.0058777159,"movies":0.0007258652,"music":0.0015680504,"other":0.000676345,"parenting":0.0008706274,"politics\/viewpoint":0.003365546,"profession":0.0004757739,"programming":0.0000672043,"religion\/supernatural":0.001056091,"rpg":0.0003742749,"sex\/relationships":0.0042797112,"social_group":0.0037449589,"software":0.0002395928,"sports":0.0005552177,"stem":0.0001629835,"travel":0.0002019179,"tv_show":0.0017243344,"video_game":0.001504618,"writing\/stories":0.0058345914},"in_data":{"advice\/question":true,"animals":true,"anime\/manga":true,"appearance":true,"arts":true,"autos":true,"board_game":true,"books":true,"card_game":true,"company\/website":true,"crypto":true,"drugs":true,"education":true,"electronics":true,"finance\/money":true,"food\/drink":true,"geo":true,"hardware\/tools":true,"health":true,"hobby":true,"meta":true,"movies":true,"music":true,"other":true,"parenting":true,"politics\/viewpoint":true,"profession":true,"programming":true,"religion\/supernatural":true,"rpg":true,"sex\/relationships":true,"social_group":true,"software":true,"sports":true,"stem":true,"travel":true,"tv_show":true,"video_game":true,"writing\/stories":true}};

    var groupdata = [{"category":"advice/question","toxic":0.0305571519},{"category":"animals","toxic":0.0425189077},{"category":"anime/manga","toxic":0.0433381919},{"category":"appearance","toxic":0.0321370698},{"category":"arts","toxic":0.0188461165},{"category":"autos","toxic":0.0236057128},{"category":"board_game","toxic":0.0171705025},{"category":"books","toxic":0.0327417119},{"category":"card_game","toxic":0.0215260645},{"category":"company/website","toxic":0.0330981164},{"category":"crypto","toxic":0.0216759738},{"category":"drugs","toxic":0.0694279823},{"category":"education","toxic":0.0157944911},{"category":"electronics","toxic":0.0172793256},{"category":"finance/money","toxic":0.0140026984},{"category":"food/drink","toxic":0.0287069106},{"category":"geo","toxic":0.0278845567},{"category":"hardware/tools","toxic":0.0219857177},{"category":"health","toxic":0.0606775371},{"category":"hobby","toxic":0.024199404},{"category":"meta","toxic":0.0998363479},{"category":"movies","toxic":0.0331046758},{"category":"music","toxic":0.0495443034},{"category":"other","toxic":0.0294908441},{"category":"parenting","toxic":0.0464743116},{"category":"politics/viewpoint","toxic":0.0717276532},{"category":"profession","toxic":0.0252551335},{"category":"programming","toxic":0.0070936328},{"category":"religion/supernatural","toxic":0.0316086978},{"category":"rpg","toxic":0.0167256045},{"category":"sex/relationships","toxic":0.1125346917},{"category":"social_group","toxic":0.0708567473},{"category":"software","toxic":0.0151197391},{"category":"sports","toxic":0.0308712749},{"category":"stem","toxic":0.0106304902},{"category":"travel","toxic":0.0133951035},{"category":"tv_show","toxic":0.0552820047},{"category":"video_game","toxic":0.0475992868},{"category":"writing/stories","toxic":0.1082860413},{"category":"advice/question","severe_toxic":0.0001857638},{"category":"animals","severe_toxic":0.000116791},{"category":"anime/manga","severe_toxic":0.0003015392},{"category":"appearance","severe_toxic":0.0000748852},{"category":"arts","severe_toxic":0.0000449165},{"category":"autos","severe_toxic":0.0000710675},{"category":"board_game","severe_toxic":0.0000391442},{"category":"books","severe_toxic":0.0001208011},{"category":"card_game","severe_toxic":0.0000785091},{"category":"company/website","severe_toxic":0.0001320018},{"category":"crypto","severe_toxic":0.0001158219},{"category":"drugs","severe_toxic":0.0005115712},{"category":"education","severe_toxic":0.0000627688},{"category":"electronics","severe_toxic":0.000041103},{"category":"finance/money","severe_toxic":0.0000178127},{"category":"food/drink","severe_toxic":0.0000709728},{"category":"geo","severe_toxic":0.0001389355},{"category":"hardware/tools","severe_toxic":0.0000393353},{"category":"health","severe_toxic":0.0004142293},{"category":"hobby","severe_toxic":0.0000741313},{"category":"meta","severe_toxic":0.0021953802},{"category":"movies","severe_toxic":0.00017206},{"category":"music","severe_toxic":0.0005246832},{"category":"other","severe_toxic":0.0002026712},{"category":"parenting","severe_toxic":0.0001308178},{"category":"politics/viewpoint","severe_toxic":0.000529355},{"category":"profession","severe_toxic":0.0000964991},{"category":"programming","severe_toxic":0.0000065885},{"category":"religion/supernatural","severe_toxic":0.000084406},{"category":"rpg","severe_toxic":0.0000608399},{"category":"sex/relationships","severe_toxic":0.0010683419},{"category":"social_group","severe_toxic":0.0004481967},{"category":"software","severe_toxic":0.0000562747},{"category":"sports","severe_toxic":0.0001269911},{"category":"stem","severe_toxic":0.000018498},{"category":"travel","severe_toxic":0.0000131267},{"category":"tv_show","severe_toxic":0.0004056186},{"category":"video_game","severe_toxic":0.0005440045},{"category":"writing/stories","severe_toxic":0.002270122},{"category":"advice/question","obscene":0.0114381439},{"category":"animals","obscene":0.010966318},{"category":"anime/manga","obscene":0.0224878672},{"category":"appearance","obscene":0.011202853},{"category":"arts","obscene":0.0059959589},{"category":"autos","obscene":0.0081200499},{"category":"board_game","obscene":0.0051047241},{"category":"books","obscene":0.0154133376},{"category":"card_game","obscene":0.0076111845},{"category":"company/website","obscene":0.0171828119},{"category":"crypto","obscene":0.0100758178},{"category":"drugs","obscene":0.0429542002},{"category":"education","obscene":0.006966792},{"category":"electronics","obscene":0.0067196716},{"category":"finance/money","obscene":0.0053864951},{"category":"food/drink","obscene":0.009633347},{"category":"geo","obscene":0.0132210884},{"category":"hardware/tools","obscene":0.0071029489},{"category":"health","obscene":0.030016952},{"category":"hobby","obscene":0.00842457},{"category":"meta","obscene":0.0636470576},{"category":"movies","obscene":0.0171975683},{"category":"music","obscene":0.0294632153},{"category":"other","obscene":0.0148618821},{"category":"parenting","obscene":0.0185024444},{"category":"politics/viewpoint","obscene":0.0393515979},{"category":"profession","obscene":0.0120683489},{"category":"programming","obscene":0.0021950816},{"category":"religion/supernatural","obscene":0.0120065103},{"category":"rpg","obscene":0.0051692369},{"category":"sex/relationships","obscene":0.0693850425},{"category":"social_group","obscene":0.0377960269},{"category":"software","obscene":0.0063581645},{"category":"sports","obscene":0.0143247965},{"category":"stem","obscene":0.0033935095},{"category":"travel","obscene":0.002886027},{"category":"tv_show","obscene":0.0294858836},{"category":"video_game","obscene":0.0241297689},{"category":"writing/stories","obscene":0.0627398344},{"category":"advice/question","threat":0.0006959765},{"category":"animals","threat":0.0004336823},{"category":"anime/manga","threat":0.0009626301},{"category":"appearance","threat":0.0001076593},{"category":"arts","threat":0.0001119796},{"category":"autos","threat":0.0000882562},{"category":"board_game","threat":0.0002616276},{"category":"books","threat":0.000469444},{"category":"card_game","threat":0.0001963069},{"category":"company/website","threat":0.0001500199},{"category":"crypto","threat":0.000117694},{"category":"drugs","threat":0.0006854314},{"category":"education","threat":0.0001363583},{"category":"electronics","threat":0.0000721078},{"category":"finance/money","threat":0.0000365544},{"category":"food/drink","threat":0.0001304183},{"category":"geo","threat":0.0002222778},{"category":"hardware/tools","threat":0.0001597807},{"category":"health","threat":0.0007340626},{"category":"hobby","threat":0.0001909217},{"category":"meta","threat":0.0017121657},{"category":"movies","threat":0.0004675515},{"category":"music","threat":0.0005911589},{"category":"other","threat":0.0002441914},{"category":"parenting","threat":0.0002917256},{"category":"politics/viewpoint","threat":0.000951013},{"category":"profession","threat":0.0001304345},{"category":"programming","threat":0.0000229491},{"category":"religion/supernatural","threat":0.0002758485},{"category":"rpg","threat":0.0002752517},{"category":"sex/relationships","threat":0.0012487889},{"category":"social_group","threat":0.000587744},{"category":"software","threat":0.0000762549},{"category":"sports","threat":0.0001967296},{"category":"stem","threat":0.0000481851},{"category":"travel","threat":0.000057745},{"category":"tv_show","threat":0.0009212576},{"category":"video_game","threat":0.0012503621},{"category":"writing/stories","threat":0.0027331448},{"category":"advice/question","insult":0.005047242},{"category":"animals","insult":0.0058690155},{"category":"anime/manga","insult":0.0076970841},{"category":"appearance","insult":0.0038455197},{"category":"arts","insult":0.0023047909},{"category":"autos","insult":0.0028489443},{"category":"board_game","insult":0.0018343878},{"category":"books","insult":0.0048688983},{"category":"card_game","insult":0.0029695995},{"category":"company/website","insult":0.0055974856},{"category":"crypto","insult":0.0035974817},{"category":"drugs","insult":0.0139050709},{"category":"education","insult":0.0022991796},{"category":"electronics","insult":0.0021775426},{"category":"finance/money","insult":0.0015455115},{"category":"food/drink","insult":0.0035993532},{"category":"geo","insult":0.0046479595},{"category":"hardware/tools","insult":0.0027526854},{"category":"health","insult":0.0110292206},{"category":"hobby","insult":0.0032573187},{"category":"meta","insult":0.0323575697},{"category":"movies","insult":0.005087992},{"category":"music","insult":0.0099826505},{"category":"other","insult":0.0054783701},{"category":"parenting","insult":0.006397421},{"category":"politics/viewpoint","insult":0.0147650097},{"category":"profession","insult":0.004016594},{"category":"programming","insult":0.000697863},{"category":"religion/supernatural","insult":0.0040280063},{"category":"rpg","insult":0.0018833755},{"category":"sex/relationships","insult":0.0257089669},{"category":"social_group","insult":0.0134465461},{"category":"software","insult":0.0022469711},{"category":"sports","insult":0.0047777246},{"category":"stem","insult":0.0011993645},{"category":"travel","insult":0.0014669918},{"category":"tv_show","insult":0.0110325255},{"category":"video_game","insult":0.0097436479},{"category":"writing/stories","insult":0.0306217882},{"category":"advice/question","identity_hate":0.0008370476},{"category":"animals","identity_hate":0.0010015259},{"category":"anime/manga","identity_hate":0.0012221094},{"category":"appearance","identity_hate":0.0005392865},{"category":"arts","identity_hate":0.0003605659},{"category":"autos","identity_hate":0.0003312108},{"category":"board_game","identity_hate":0.0003788605},{"category":"books","identity_hate":0.0007555376},{"category":"card_game","identity_hate":0.0003839888},{"category":"company/website","identity_hate":0.0005512517},{"category":"crypto","identity_hate":0.0003715653},{"category":"drugs","identity_hate":0.0017580077},{"category":"education","identity_hate":0.0003033149},{"category":"electronics","identity_hate":0.0002250736},{"category":"finance/money","identity_hate":0.0001490069},{"category":"food/drink","identity_hate":0.0005121129},{"category":"geo","identity_hate":0.0008906649},{"category":"hardware/tools","identity_hate":0.0003499504},{"category":"health","identity_hate":0.0014961126},{"category":"hobby","identity_hate":0.0004496696},{"category":"meta","identity_hate":0.0058777159},{"category":"movies","identity_hate":0.0007258652},{"category":"music","identity_hate":0.0015680504},{"category":"other","identity_hate":0.000676345},{"category":"parenting","identity_hate":0.0008706274},{"category":"politics/viewpoint","identity_hate":0.003365546},{"category":"profession","identity_hate":0.0004757739},{"category":"programming","identity_hate":0.0000672043},{"category":"religion/supernatural","identity_hate":0.001056091},{"category":"rpg","identity_hate":0.0003742749},{"category":"sex/relationships","identity_hate":0.0042797112},{"category":"social_group","identity_hate":0.0037449589},{"category":"software","identity_hate":0.0002395928},{"category":"sports","identity_hate":0.0005552177},{"category":"stem","identity_hate":0.0001629835},{"category":"travel","identity_hate":0.0002019179},{"category":"tv_show","identity_hate":0.0017243344},{"category":"video_game","identity_hate":0.001504618},{"category":"writing/stories","identity_hate":0.0058345914},{"category":"advice/question","in_data":true},{"category":"animals","in_data":true},{"category":"anime/manga","in_data":true},{"category":"appearance","in_data":true},{"category":"arts","in_data":true},{"category":"autos","in_data":true},{"category":"board_game","in_data":true},{"category":"books","in_data":true},{"category":"card_game","in_data":true},{"category":"company/website","in_data":true},{"category":"crypto","in_data":true},{"category":"drugs","in_data":true},{"category":"education","in_data":true},{"category":"electronics","in_data":true},{"category":"finance/money","in_data":true},{"category":"food/drink","in_data":true},{"category":"geo","in_data":true},{"category":"hardware/tools","in_data":true},{"category":"health","in_data":true},{"category":"hobby","in_data":true},{"category":"meta","in_data":true},{"category":"movies","in_data":true},{"category":"music","in_data":true},{"category":"other","in_data":true},{"category":"parenting","in_data":true},{"category":"politics/viewpoint","in_data":true},{"category":"profession","in_data":true},{"category":"programming","in_data":true},{"category":"religion/supernatural","in_data":true},{"category":"rpg","in_data":true},{"category":"sex/relationships","in_data":true},{"category":"social_group","in_data":true},{"category":"software","in_data":true},{"category":"sports","in_data":true},{"category":"stem","in_data":true},{"category":"travel","in_data":true},{"category":"tv_show","in_data":true},{"category":"video_game","in_data":true},{"category":"writing/stories","in_data":true}]
    labels = Object.keys(realdata)
    categories = Object.keys(realdata["toxic"])

    var i = 0
    var groupChartData = groupdata
    var columnsInfo = {};
    columnsInfo[labels[i]] = labels[i]
    $("#chart").empty();
        var barChartConfig = {
            mainDiv: "#chart",
            colorRange: ["#2a98cd", "#df7247"],
            data: groupChartData,
            columnsInfo: columnsInfo,
            xAxis: "metrics",
            yAxis: "category",
            label: {
                xAxis: "Mean metric for " + labels[i],
                yAxis: ""
            },
        requireLegend: true
    };
    var groupChart = new horizontalGroupBarChart(barChartConfig);

    var select = document.getElementById("label");

    select.options[0] = new Option("Toxic", 0);
    select.options[1] = new Option("Severe Toxic", 1);
    select.options[2] = new Option("Obscene", 2);
    select.options[3] = new Option("Threat", 3);
    select.options[4] = new Option("Insult", 4);
    select.options[5] = new Option("Identity Hate", 5);

    function remakeChart(){
        var selectedLabel = select.selectedIndex;
        console.log(selectedLabel)
        var i = selectedLabel
        var groupChartData = groupdata
        var columnsInfo = {};
        columnsInfo[labels[i]] = labels[i]
        $("#chart").empty();
            var barChartConfig = {
                mainDiv: "#chart",
                colorRange: ["#2a98cd", "#df7247"],
                data: groupChartData,
                columnsInfo: columnsInfo,
                xAxis: "metrics",
                yAxis: "category",
                label: {
                    xAxis: "Mean metric for " + labels[i],
                    yAxis: ""
                },
            requireLegend: true
        };
        var groupChart = new horizontalGroupBarChart(barChartConfig)
    }


</script>
</body>